# Docker网络

## 自定义桥接网络（单机）

自定义桥接提供了容器化应用程序之间更好的隔离性和互操性-协同工作的能力

* 连接同一个自定义桥接网络的容器彼此暴露端口，而不会对外世界暴露端口。这样就可以使容器化应用之间很容易的互相通信，外面的世界也不会很容易进入的容器里。
* 设想一个具有Web前端和数据库后端的应用程序。外部世界需要访问web前端（也许在端口80上），但是只有后端本身需要访问数据库主机和端口。使用用户定义的桥，只需要打开web端口，并且数据库应用程序不需要打开任何端口，因为web前端可以通过用户定义的桥到达它。
* 如果在默认桥接网络上运行相同的应用程序堆栈，则需要同时打开web端口和数据库端口，并为每个端口使用-p或-publish标志。这意味着Docker主机需要通过其他方式阻止对数据库端口的访问。

自定义桥接可以在容器之间提供自动DNS解决方案

* 默认桥接网络上的容器只能通过IP地址相互访问，除非使用--link选项，这被认为是遗留的问题。在用户定义的桥接网络上，容器可以通过名称或别名彼此解析。

创建使用自定义网桥

```bash
# 创建（您可以指定子网、IP地址范围、网关和其他选项。）
docker network create my-net
# 删除（如果容器当前连接到网络，首先断开它们。）
docker network rm my-net
# 容器加入自定义网络
docker create --name my-nginx --network my-net --publish 8080:80 nginx:latest
# 将正在运行的容器连接到现有用户定义的桥接网络
docker network connect my-net my-nginx
# 容器从自定义桥接网络断开
docker network disconnect my-net my-nginx
```