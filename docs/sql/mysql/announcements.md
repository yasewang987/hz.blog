# Mysql使用注意事项

## 排序+分页导致结果错乱

* 问题：
  > 如果order by的字段有多个行都有相同的值，mysql是会随机的顺序返回查询结果的，具体依赖对应的执行计划。也就是说如果排序的列是无序的，那么排序的结果行的顺序也是不确定的。

  > mysql在使用文件排序（using filesort）会出现这个问题，如果使用排序字段有索引默认就不会使用文件索引，就没有这个问题

* 解决方案
  > 如果想在Limit存在或不存在的情况下，都保证排序结果相同，可以额外加一个排序条件。例如id字段是唯一的，可以考虑在排序字段中额外加个id排序去确保顺序稳定。